import{g as ae}from"./request-CN9HCVnM.js";/* empty css                   *//* empty css                        */import"./el-tooltip-l0sNRNKZ.js";/* empty css                     *//* empty css                  *//* empty css                      *//* empty css                 *//* empty css                     *//* empty css                  */import{g as ne,e as oe,a as se}from"./exam-B-tIviel.js";import{g as le}from"./user-Coud_zWb.js";import{r as i,a as V,c as u,b as o,F as k,p as L,d as s,w as l,B as ie,G as re,H as ue,o as r,I as pe,t as v,e as g,f,g as P,J as R,h as ce,K as me,z as de,A as ge,C as fe,D as ve}from"./index-uxggQiZG.js";import{_ as _e}from"./_plugin-vue_export-helper-DlAUqK2U.js";const xe="/assets/exam-CQdnlaMo.png",we={class:"exam-page flex-col"},ye={class:"exam-selected-section flex-col"},ke={class:"exam-option-group flex-row justify-between"},Ce=["onClick"],Se={class:"center-box"},be={class:"exam-list-group flex-row"},ze={class:"right-info"},Ee={class:"exam-title"},Te={class:"exam-content flex-col justify-between"},De={class:"exam-button-container"},he={key:0,class:"exam-hash-entry"},Ne={key:1,class:"exam-hash-entry"},Ie={key:2},Ve={class:"exam-page-pagination flex-row"},Le={__name:"Exam",setup(Pe){const C=i([]),S=i(0),b=i(0),U=i([{label:"当前竞赛",value:0},{label:"往期竞赛",value:1}]),n=V({pageNum:1,pageSize:9,startTime:"",endTime:"",type:0}),p=i([]);async function c(){p.value[0]instanceof Date&&(n.startTime=p.value[0].toISOString()),p.value[1]instanceof Date&&(n.endTime=p.value[1].toISOString());const t=await ne(n);C.value=t.rows,S.value=t.total}c();async function $(t){b.value=t,n.pageNum=1,n.type=t,c()}function j(){n.pageNum=1,c()}function B(){n.pageNum=1,n.pageSize=9,n.type=0,n.startTime="",n.endTime="",p.value.length=0,c()}function O(t){n.pageNum=1,c()}function F(t){c()}function A(t){const e=new Date;return new Date(t.startTime)<e&&new Date(t.endTime)>e&&!t.enter}function H(t){const e=new Date;return new Date(t.startTime)>e&&t.enter}function M(t){const e=new Date;return new Date(t.endTime)<e}function G(t){const e=new Date;return new Date(t.startTime)<e&&new Date(t.endTime)>e&&t.enter}function J(t){const e=new Date;return new Date(t.startTime)>e&&!t.enter}const z=i(!1);async function K(){ae()&&(await le(),z.value=!0)}async function Q(t){if(await K(),!z.value){R({showClose:!0,message:"请先登录后报名参赛,谢谢",type:"error"});return}const e=i({examId:t});await oe(e.value),R({showClose:!0,message:"您已报名成功，请按时参赛",type:"success"}),c()}function E(t){ce.push(`/c-oj/anwser?examId=${t.examId}&examTitle=${t.title}&examEndTime=${t.endTime}`)}const m=V({examId:"",pageNum:1,pageSize:10}),T=i([]),D=i(0);function q(t){m.pageNum=1,x()}function W(t){x()}const _=i(!1);async function x(){const t=await se(m);T.value=t.rows,D.value=t.total}function X(t){_.value=!0,m.examId=t,x()}return(t,e)=>{const Y=me,h=de,d=ge,Z=ie,N=re,w=fe,ee=ve,te=ue;return r(),u(k,null,[o("div",we,[o("div",ye,[o("div",ke,[(r(!0),u(k,null,L(U.value,a=>(r(),u("div",{class:pe(["exam-option",{selected:b.value===a.value}]),key:a.value,onClick:I=>$(a.value)},v(a.label),11,Ce))),128))]),o("div",Se,[e[13]||(e[13]=o("span",{class:"exam-list-title"},"推荐竞赛",-1)),s(Z,{inline:"true",class:"exam-navigation flex-row justify-between"},{default:l(()=>[s(h,{label:"竞赛时间",prop:"datetimerange",class:"exam-navigation-box"},{default:l(()=>[s(Y,{modelValue:p.value,"onUpdate:modelValue":e[0]||(e[0]=a=>p.value=a),style:{width:"360px"},type:"datetimerange","range-separator":"至","start-placeholder":"开始日期","end-placeholder":"结束日期"},null,8,["modelValue"])]),_:1}),s(h,null,{default:l(()=>[s(d,{onClick:j,plain:"",type:"primary"},{default:l(()=>e[6]||(e[6]=[g("搜索")])),_:1}),s(d,{onClick:B,plain:"",type:"info"},{default:l(()=>e[7]||(e[7]=[g("重置")])),_:1})]),_:1})]),_:1}),o("div",be,[(r(!0),u(k,null,L(C.value,(a,I)=>(r(),u("div",{class:"exam-list-item flex-col",key:I},[e[12]||(e[12]=o("div",null,[o("img",{src:xe})],-1)),o("div",ze,[o("span",Ee,v(a.title),1),o("div",Te,[o("span",null,"开赛时间："+v(a.startTime),1),o("span",null,"结束时间："+v(a.endTime),1)]),o("div",De,[A(a)?(r(),u("span",he,"已开赛")):f("",!0),H(a)?(r(),u("span",Ne,"已报名")):f("",!0),M(a)?(r(),u("div",Ie,[s(d,{class:"exam-practice-button",type:"primary",plain:"",onClick:y=>E(a)},{default:l(()=>e[8]||(e[8]=[g("竞赛练习")])),_:2},1032,["onClick"]),s(d,{class:"exam-rank-button",type:"primary",plain:"",onClick:y=>X(a.examId)},{default:l(()=>e[9]||(e[9]=[g("查看排名")])),_:2},1032,["onClick"])])):f("",!0),G(a)?(r(),P(d,{key:3,class:"exam-start-button",type:"primary",plain:"",onClick:y=>E(a)},{default:l(()=>e[10]||(e[10]=[g("开始答题")])),_:2},1032,["onClick"])):f("",!0),J(a)?(r(),P(d,{key:4,class:"exam-enter-button",type:"primary",plain:"",onClick:y=>Q(a.examId)},{default:l(()=>e[11]||(e[11]=[g("报名参赛")])),_:2},1032,["onClick"])):f("",!0)])])]))),128))]),o("div",Ve,[s(N,{background:"",layout:"total, sizes, prev, pager, next, jumper",total:S.value,"current-page":n.pageNum,"onUpdate:currentPage":e[1]||(e[1]=a=>n.pageNum=a),"page-size":n.pageSize,"onUpdate:pageSize":e[2]||(e[2]=a=>n.pageSize=a),"page-sizes":[3,6,9,12],onSizeChange:O,onCurrentChange:F},null,8,["total","current-page","page-size"])])])])]),s(te,{modelValue:_.value,"onUpdate:modelValue":e[5]||(e[5]=a=>_.value=a),width:"600px",top:"30vh","show-close":!0,"close-on-click-modal":!1,"close-on-press-escape":!1,class:"oj-login-dialog-centor",center:""},{default:l(()=>[s(ee,{data:T.value},{default:l(()=>[s(w,{label:"排名",prop:"examRank"}),s(w,{label:"用户昵称",prop:"nickName"}),s(w,{label:"用户得分",prop:"score"})]),_:1},8,["data"]),s(N,{class:"range_page",background:"",layout:"total, sizes, prev, pager, next, jumper",total:D.value,"current-page":m.pageNum,"onUpdate:currentPage":e[3]||(e[3]=a=>m.pageNum=a),"page-size":m.pageSize,"onUpdate:pageSize":e[4]||(e[4]=a=>m.pageSize=a),"page-sizes":[5,10,30,50],onSizeChange:q,onCurrentChange:W},null,8,["total","current-page","page-size"])]),_:1},8,["modelValue"])],64)}}},qe=_e(Le,[["__scopeId","data-v-decff3e0"]]);export{qe as default};
